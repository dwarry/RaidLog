define(["require","exports","services/dataService","knockout","viewmodels/pagedGrid","viewmodels/maintainProject"],function(n,t,i,r,u,f){var s=i,e=r,h=u,o=f;return function(){function n(){this.title="Projects",this.projects=e.observableArray();var n={data:this.projects};this.listViewModel=new h.ListViewModel(n),this.listViewModel.searchPredicate=function(n,t){return t.code.indexOf(n)!==-1||t.name.indexOf(n)!==-1},this.canEditProject=this.canArchiveProject=e.computed(function(){return this.listViewModel.selected()!==null},this)}return n.prototype.search=function(n){this.listViewModel.searchField(n)},n.prototype.activate=function(){this.refresh()},n.prototype.refresh=function(){var n=this;s.getProjects().done(function(t){n.projects(t),n.listViewModel.setSelected(null)})},n.prototype.editProject=function(){var n=this,t=new o(this.listViewModel.selected());t.show().done(function(t){t&&n.refresh()})},n.prototype.newProject=function(){var n=this,t=new o(null);t.show().done(function(t){t&&n.refresh()})},n.prototype.archiveProject=function(){},n}()})