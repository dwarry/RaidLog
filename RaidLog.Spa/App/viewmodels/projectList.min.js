define(["require","exports","services/dataService","viewmodels/pagedGrid","viewmodels/maintainProject"],function(n,t,i,r,u){var e=i,o=r,f=u;return function(){function n(){this.title="Projects",this.projects=ko.observableArray();var n={data:this.projects};this.listViewModel=new o.ListViewModel(n),this.listViewModel.searchPredicate=function(n,t){return t.code.indexOf(n)!==-1||t.name.indexOf(n)!==-1},this.canEditProject=this.canArchiveProject=ko.computed(function(){return this.listViewModel.selected()!==null},this)}return n.prototype.search=function(n){this.listViewModel.searchField(n)},n.prototype.activate=function(){this.refresh()},n.prototype.refresh=function(){var n=this;e.getProjects().done(function(t){n.projects(t),n.listViewModel.setSelected(null)})},n.prototype.editProject=function(){var n=this,t=new f(this.listViewModel.selected());t.show().done(function(t){t&&n.refresh()})},n.prototype.newProject=function(){var n=this,t=new f(null);t.show().done(function(t){t&&n.refresh()})},n.prototype.archiveProject=function(){},n}()})