var __extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype,n.prototype=new r};define(["require","exports","services/dataService","EditableViewModel"],function(n,t,i,r){var u=i,f=r,e=function(n){function t(t,i){var r=this;n.call(this,t,"Risk"),this.projectId=i,this.riskNumber=ko.observable(0),this.description=ko.observable("").extend({required:!0,maxLength:2048}),this.raisedDate=ko.observable(moment().local().format("YYYY-MM-DD")).extend({required:!0,dateISO:!0}),this.raisedBy=ko.observable("").extend({required:!0,maxLength:50}),this.rifCategoryId=ko.observable().extend({required:!0}),this.isProjectRisk=ko.observable(!0),this.workstream=ko.observable("").extend({required:!0,maxLength:50}),this.commentary=ko.observable("").extend({required:!0,maxLength:2048}),this.approachId=ko.observable(null).extend({required:!0}),this.impactId=ko.observable(null).extend({required:!0}),this.likelihoodId=ko.observable(null).extend({required:!0}),this.owner=ko.observable("").extend({required:!0,maxLength:50}),this.isActive=ko.observable(!0),this.isNewItem=ko.computed(function(){return r.id===0},this),this.validation=ko.validatedObservable([this.riskNumber,this.description,this.raisedDate,this.raisedBy,this.rifCategoryId,this.isProjectRisk,this.workstream,this.commentary,this.approachId,this.impactId,this.likelihoodId,this.owner,this.isActive]),this.canSave=ko.computed(function(){return r.validation.isValid()},this)}return __extends(t,n),t.prototype.doSaveItem=function(){var t=this,n={description:this.description(),raisedDate:this.raisedDate(),raisedBy:this.raisedBy(),rifCategoryId:this.rifCategoryId(),isProjectRisk:this.isProjectRisk(),workstream:this.workstream(),commentary:this.commentary(),approachId:this.approachId(),impactId:this.impactId(),likelihoodId:this.likelihoodId(),owner:this.owner()};return this.isNewItem()||(n.id=this.id,n.version=this.version),u.saveRisk(this.projectId,n).done(function(n){t.item=n,t.updateFromItem()})},t}(f.EditableViewModel);t.RiskViewModel=e})