var dataService=require("./services/dataService"),dialog=require("plugins/dialog"),MaintainProject=function(){function n(n){this.projectId=0,this.projectVersion="",this.projectCode=ko.observable().extend({required:!0,minLength:1,maxLength:16}),this.projectName=ko.observable().extend({required:!0,minLength:3,maxLength:50}),this.title="",this.validation=ko.validatedObservable({}),n?(this.title="Edit Project",this.projectId=n.id,this.projectVersion=n.version,this.projectCode(n.code),this.projectName(n.name)):(this.title="New Project",this.projectCode(""),this.projectName("")),this.validation=ko.validatedObservable({projectCode:this.projectCode,projectName:this.projectName})}return n.prototype.activate=function(){this.validation.errors.showAllMessages()},n.prototype.show=function(){return dialog.show(this,null)},n.prototype.cancel=function(){dialog.close(this,!1)},n.prototype.save=function(){var t=this,n={code:this.projectCode(),name:this.projectName()};this.projectId!==0&&(n.id=this.projectId,n.version=this.projectVersion),dataService.saveProject(n).done(function(){return dialog.close(t,!0)}).fail(function(){return dialog.close(t,!1)})},n}();module.exports=MaintainProject