var __extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype,n.prototype=new r};define(["require","exports","MasterDetailViewModel","services/dataService"],function(n,t,i,r){var f=i,u=r,e=function(n){function t(){n.call(this),this.projectCode=ko.observable(""),this.projectName=ko.observable(""),this.activeItems=ko.observable(!0),this.approaches=ko.observableArray(),this.impacts=ko.observableArray(),this.likelihoods=ko.observableArray(),this.koMappingOptions={key:function(n){return n.id}}}return __extends(t,n),t.prototype.activate=function(n,t){var i=this;this.projectId=n,this.activeItems=t;var r=u.getReferenceData().done(function(n){i.approaches(n.approaches),i.impacts(n.impacts),i.likelihoods(n.likelihoods)}),f=u.getProject(this.projectId).done(function(n){i.projectId=n.id,i.projectCode(n.code),i.projectName(n.name)}),e=this.refresh();return $.when([r,f,e])},t.prototype.doRefresh=function(){return u.getProjectRisks(this.projectId,this.activeItems())},t.prototype.impactScore=function(n){var t=0;return $.each(this.impacts(),function(i,r){return r.id===n?(t=r.score,!1):!0}),t},t.prototype.likelihoodScore=function(n){var t=0;return $.each(this.likelihoods,function(i,r){return r.id===n?(t=r.score,!1):!0}),t},t}(f.MasterDetailViewModel)})