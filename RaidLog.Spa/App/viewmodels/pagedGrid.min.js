define(["require","exports"],function(n,t){function u(n){var t,i;if(typeof n.length!="number"||n.length===0)return[];t=[];for(i in n[0])t.push({headerText:i,rowText:i});return t}var i=new ko.nativeTemplateEngine,r;ko.bindingHandlers.pagedGrid={init:function(){return{controlsDescendantBindings:!0}},update:function(n,t,r){for(var u=t(),f=r(),s=f.gridTemplateName||"ko_simpleGrid_grid",h=f.pagerTemplateName||"ko_simpleGrid_pageLinks",e,o;n.firstChild;)ko.removeNode(n.firstChild);e=n.appendChild(document.createElement("DIV")),ko.renderTemplate(s,u,{templateEngine:i},e,"replaceNode"),o=n.appendChild(document.createElement("DIV")),ko.renderTemplate(h,u,{templateEngine:i},o,"replaceNode")}},r=function(){function n(n){var t=this;this.allData=ko.observableArray(),this.currentPageIndex=ko.observable(0),this.selected=ko.observable(null),this.searchField=ko.observable(""),this.searchPredicate=null,this.allData=n.data,this.pageSize=n.pageSize||10,this.filteredData=ko.computed(function(){var n=t.searchField().trim();return!t.searchPredicate||n.length===0?ko.utils.unwrapObservable(t.allData):ko.utils.arrayFilter(ko.utils.unwrapObservable(t.allData),function(i){return t.searchPredicate(n,i)})},this),this.itemsOnCurrentPage=ko.computed(function(){var n=t.pageSize*t.currentPageIndex();return t.filteredData().slice(n,n+t.pageSize)},this),this.maxPageIndex=ko.computed(function(){return Math.ceil(t.filteredData().length/t.pageSize)-1},this),this.columns=n.columns||u(ko.utils.unwrapObservable(this.allData)),this.setSelected=function(n){return t.selected()===n?t.selected(null):t.selected(n),!0}}return n}(),t.ListViewModel=r})