define(["require","exports","knockout"],function(n,t,i){function e(n){var t,i;if(typeof n.length!="number"||n.length===0)return[];t=[];for(i in n[0])t.push({headerText:i,rowText:i});return t}var r=i,u=new r.templateEngine,f;r.bindingHandlers.pagedGrid={init:function(){return{controlsDescendantBindings:!0}},update:function(n,t,i){for(var f=t(),e=i(),o;n.firstChild;)r.removeNode(n.firstChild);var s=e.simpleGridTemplate||"ko_simpleGrid_grid",h=e.simpleGridPagerTemplate||"ko_simpleGrid_pageLinks",c=n.appendChild(document.createElement("DIV"));r.renderTemplate(s,f,{templateEngine:u},c,"replaceNode"),o=n.appendChild(document.createElement("DIV")),r.renderTemplate(h,f,{templateEngine:u},o,"replaceNode")}},f=function(){function n(n){var t=this;this.allData=r.observableArray(),this.currentPageIndex=r.observable(0),this.selected=r.observable(null),this.searchField=r.observable(),this.searchPredicate=null,this.allData=n.data,this.pageSize=n.pageSize||10,this.filteredData=r.computed(function(){if(!t.searchPredicate)return r.utils.unwrapObservable(t.allData());return r.utils.arrayFilter(r.utils.unwrapObservable(t.allData()),function(n){return t.searchPredicate(t.searchField,n)})},this),this.itemsOnCurrentPage=r.computed(function(){var n=t.pageSize*t.currentPageIndex();return t.filteredData().slice(n,n+t.pageSize)},this),this.maxPageIndex=r.computed(function(){return Math.ceil(t.filteredData().length/t.pageSize)-1},this),this.columns=n.columns||e(r.utils.unwrapObservable(this.allData))}return n.prototype.setSelected=function(n){this.selected()===n?this.selected(null):this.selected(n)},n}(),t.ListViewModel=f})