define(["require","exports","services/logger","plugins/http"],function(n,t,i,r){function o(){return{id:null,version:null,riskNumber:null,description:"",raisedDate:moment().format("YYYY-MM-DD"),raisedBy:"",rifCategoryId:null,isProjectRisk:!0,workstream:"",commentary:"",approachId:null,impactId:null,likelihoodId:null,owner:""}}function s(){return{id:null,version:null,assumptionNumber:null,description:"",workstream:"",owner:"",validatedBy:"",statusId:"",supportingDocumentation:""}}function h(){return{id:null,version:null,issueNumber:null}}function c(){return{id:null,version:null,dependencyNumber:null}}function l(){return{id:null,version:null,queryNumber:null}}function y(){return v}function p(){return e.get("/api/projects/").done(function(n){u.logSuccess("Retrieved Projects",n,f,!0)}).fail(function(){u.logError("Could not retrieve Projects",arguments,f,!0)})}function w(n){return e.get("/api/projects/"+n).done(function(n){return u.logSuccess("Retrieved Project",n,f,!1)}).fail(function(n){return u.logError("Error retrieving Project",n,f,!0)})}function b(n,t){return $.getJSON("/api/project/"+n+"/risks/",{active:t})}function k(n,t){return $.getJSON("/api/project/"+n+"/assumptions/",{active:t})}function d(n,t){return $.getJSON("/api/project/"+n+"/issues/",{active:t})}function g(n,t){return $.getJSON("/api/project/"+n+"/dependencies/",{active:t})}function nt(n,t){return $.getJSON("/api/project/"+n+"/queries/",{active:t})}function tt(n){var t={url:"/api/projects/",data:n,dataType:"json"};return n.id?(t.url=t.url+n.id,t.type="PUT"):t.type="POST",$.ajax(t).done(function(){u.logSuccess("Saved Project",null,"services/dataService",!0)}).fail(function(t,i){u.logError("Error saving the Project",{},"services/dataService",!0),u.logError(i+" "+t.responseText,n,"services/dataService",!1)})}function it(n,t){var i={data:t};return"id"in t?(i.url="/api/risks/"+t.id,i.type="PUT"):(i.url="/api/project/"+n+"/risks/",i.type="POST"),$.ajax(i).done(function(){u.log("Saved Risk",null,null,!0)}).fail(function(n,i){u.logError(i+" "+n.responseText,t,"backend",!1),u.logError("Error saving the Risk",null,"backend",!0)})}t.makeRiskDto=o,t.makeNewAssumption=s,t.makeNewIssueDto=h,t.makeNewDependencyDto=c,t.makeNewQueryDto=l;var u=i,e=r,a,f="services/dataService",v=e.get("/api/ReferenceData/").done(function(n){a=n,u.logSuccess("Retrieved reference data",{},f,!0)}).fail(function(n,t){u.logError("Could not retrieve reference data ("+t+")",arguments,f,!0)});t.getReferenceData=y,t.getProjects=p,t.getProject=w,t.getProjectRisks=b,t.getProjectAssumptions=k,t.getProjectIssues=d,t.getProjectDependencies=g,t.getProjectQueries=nt,t.saveProject=tt,t.saveRisk=it})